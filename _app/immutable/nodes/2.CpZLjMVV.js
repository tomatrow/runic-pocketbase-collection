var Z=n=>{throw TypeError(n)};var X=(n,e,t)=>e.has(n)||Z("Cannot "+t);var u=(n,e,t)=>(X(n,e,"read from private field"),t?t.call(n):e.get(n)),L=(n,e,t)=>e.has(n)?Z("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(n):e.set(n,t),D=(n,e,t,s)=>(X(n,e,"write to private field"),s?s.call(n,t):e.set(n,t),t);import{b as ee,d as ke,f as pe,a as te}from"../chunks/gGmm15Vu.js";import{w as Re,a1 as fe,a2 as Te,Z as be,h as J,a as se,y as Ae,a3 as Ie,i as ie,B as je,F as Ee,C as Pe,s as _e,A as F,a4 as Le,a5 as qe,a6 as Ue,a7 as Ne,S as f,a8 as xe,a9 as De,o as Fe,aa as Ke,ab as ne,ac as re,ad as Me,M as Be,k as We,N as He,a0 as O,_ as T,$ as A,ae as B}from"../chunks/Bip7bLtS.js";import{i as Je}from"../chunks/BgorsLv7.js";import{b as $e}from"../chunks/Ed1whsa_.js";const Ge=[];function oe(n,e=!1){return M(n,new Map,"",Ge)}function M(n,e,t,s,i=null){if(typeof n=="object"&&n!==null){var r=e.get(n);if(r!==void 0)return r;if(n instanceof Map)return new Map(n);if(n instanceof Set)return new Set(n);if(Re(n)){var o=Array(n.length);e.set(n,o),i!==null&&e.set(i,o);for(var a=0;a<n.length;a+=1){var c=n[a];a in n&&(o[a]=M(c,e,t,s))}return o}if(fe(n)===Te){o={},e.set(n,o),i!==null&&e.set(i,o);for(var l in n)o[l]=M(n[l],e,t,s);return o}if(n instanceof Date)return structuredClone(n);if(typeof n.toJSON=="function")return M(n.toJSON(),e,t,s,n)}if(n instanceof EventTarget)return n;try{return structuredClone(n)}catch{return n}}function W(n,e,t=!1,s=!1,i=!1){var r=n,o="";be(()=>{var a=Ae;if(o===(o=e()??"")){J&&se();return}if(a.nodes_start!==null&&(Ie(a.nodes_start,a.nodes_end),a.nodes_start=a.nodes_end=null),o!==""){if(J){ie.data;for(var c=se(),l=c;c!==null&&(c.nodeType!==8||c.data!=="");)l=c,c=je(c);if(c===null)throw Ee(),Pe;ee(ie,l),r=_e(c);return}var p=o+"";t?p=`<svg>${p}</svg>`:s&&(p=`<math>${p}</math>`);var h=ke(p);if((t||s)&&(h=F(h)),ee(F(h),h.lastChild),t||s)for(;F(h);)r.before(F(h));else r.before(h)}})}const Ve=Symbol("is custom element"),ze=Symbol("is html");function Qe(n,e,t,s){var i=Ye(n);J&&(i[e]=n.getAttribute(e),n.nodeName==="LINK")||i[e]!==(i[e]=t)&&(t==null?n.removeAttribute(e):typeof t!="string"&&Ze(n).includes(e)?n[e]=t:n.setAttribute(e,t))}function Ye(n){return n.__attributes??(n.__attributes={[Ve]:n.nodeName.includes("-"),[ze]:n.namespaceURI===Le})}var ae=new Map;function Ze(n){var e=ae.get(n.nodeName);if(e)return e;ae.set(n.nodeName,e=[]);for(var t,s=n,i=Element.prototype;i!==s;){t=qe(s);for(var r in t)t[r].set&&e.push(r);s=fe(s)}return e}function Xe(n){Ue(n,n.v+1)}function et(n){let e=0,t=De(0),s;return()=>{Ne()&&(f(t),xe(()=>(e===0&&(s=Fe(()=>n(()=>Xe(t)))),e+=1,()=>{Ke().then(()=>{e-=1,e===0&&(s==null||s(),s=void 0)})})))}}class y extends Error{constructor(e){var t,s,i,r;super("ClientResponseError"),this.url="",this.status=0,this.response={},this.isAbort=!1,this.originalError=null,Object.setPrototypeOf(this,y.prototype),e!==null&&typeof e=="object"&&(this.url=typeof e.url=="string"?e.url:"",this.status=typeof e.status=="number"?e.status:0,this.isAbort=!!e.isAbort,this.originalError=e.originalError,e.response!==null&&typeof e.response=="object"?this.response=e.response:e.data!==null&&typeof e.data=="object"?this.response=e.data:this.response={}),this.originalError||e instanceof y||(this.originalError=e),typeof DOMException<"u"&&e instanceof DOMException&&(this.isAbort=!0),this.name="ClientResponseError "+this.status,this.message=(t=this.response)==null?void 0:t.message,this.message||(this.isAbort?this.message="The request was autocancelled. You can find more info in https://github.com/pocketbase/js-sdk#auto-cancellation.":(r=(i=(s=this.originalError)==null?void 0:s.cause)==null?void 0:i.message)!=null&&r.includes("ECONNREFUSED ::1")?this.message="Failed to connect to the PocketBase server. Try changing the SDK URL from localhost to 127.0.0.1 (https://github.com/pocketbase/js-sdk/issues/21).":this.message="Something went wrong."),this.cause=this.originalError}get data(){return this.response}toJSON(){return{...this}}}const K=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function tt(n,e){const t={};if(typeof n!="string")return t;const s=Object.assign({},{}).decode||st;let i=0;for(;i<n.length;){const r=n.indexOf("=",i);if(r===-1)break;let o=n.indexOf(";",i);if(o===-1)o=n.length;else if(o<r){i=n.lastIndexOf(";",r-1)+1;continue}const a=n.slice(i,r).trim();if(t[a]===void 0){let c=n.slice(r+1,o).trim();c.charCodeAt(0)===34&&(c=c.slice(1,-1));try{t[a]=s(c)}catch{t[a]=c}}i=o+1}return t}function ce(n,e,t){const s=Object.assign({},t||{}),i=s.encode||it;if(!K.test(n))throw new TypeError("argument name is invalid");const r=i(e);if(r&&!K.test(r))throw new TypeError("argument val is invalid");let o=n+"="+r;if(s.maxAge!=null){const a=s.maxAge-0;if(isNaN(a)||!isFinite(a))throw new TypeError("option maxAge is invalid");o+="; Max-Age="+Math.floor(a)}if(s.domain){if(!K.test(s.domain))throw new TypeError("option domain is invalid");o+="; Domain="+s.domain}if(s.path){if(!K.test(s.path))throw new TypeError("option path is invalid");o+="; Path="+s.path}if(s.expires){if(!function(c){return Object.prototype.toString.call(c)==="[object Date]"||c instanceof Date}(s.expires)||isNaN(s.expires.valueOf()))throw new TypeError("option expires is invalid");o+="; Expires="+s.expires.toUTCString()}if(s.httpOnly&&(o+="; HttpOnly"),s.secure&&(o+="; Secure"),s.priority)switch(typeof s.priority=="string"?s.priority.toLowerCase():s.priority){case"low":o+="; Priority=Low";break;case"medium":o+="; Priority=Medium";break;case"high":o+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}if(s.sameSite)switch(typeof s.sameSite=="string"?s.sameSite.toLowerCase():s.sameSite){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return o}function st(n){return n.indexOf("%")!==-1?decodeURIComponent(n):n}function it(n){return encodeURIComponent(n)}const nt=typeof navigator<"u"&&navigator.product==="ReactNative"||typeof global<"u"&&global.HermesInternal;let ge;function U(n){if(n)try{const e=decodeURIComponent(ge(n.split(".")[1]).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(e)||{}}catch{}return{}}function me(n,e=0){let t=U(n);return!(Object.keys(t).length>0&&(!t.exp||t.exp-e>Date.now()/1e3))}ge=typeof atob!="function"||nt?n=>{let e=String(n).replace(/=+$/,"");if(e.length%4==1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(var t,s,i=0,r=0,o="";s=e.charAt(r++);~s&&(t=i%4?64*t+s:s,i++%4)?o+=String.fromCharCode(255&t>>(-2*i&6)):0)s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(s);return o}:atob;const le="pb_auth";class z{constructor(){this.baseToken="",this.baseModel=null,this._onChangeCallbacks=[]}get token(){return this.baseToken}get record(){return this.baseModel}get model(){return this.baseModel}get isValid(){return!me(this.token)}get isSuperuser(){var t,s;let e=U(this.token);return e.type=="auth"&&(((t=this.record)==null?void 0:t.collectionName)=="_superusers"||!((s=this.record)!=null&&s.collectionName)&&e.collectionId=="pbc_3142635823")}get isAdmin(){return console.warn("Please replace pb.authStore.isAdmin with pb.authStore.isSuperuser OR simply check the value of pb.authStore.record?.collectionName"),this.isSuperuser}get isAuthRecord(){return console.warn("Please replace pb.authStore.isAuthRecord with !pb.authStore.isSuperuser OR simply check the value of pb.authStore.record?.collectionName"),U(this.token).type=="auth"&&!this.isSuperuser}save(e,t){this.baseToken=e||"",this.baseModel=t||null,this.triggerChange()}clear(){this.baseToken="",this.baseModel=null,this.triggerChange()}loadFromCookie(e,t=le){const s=tt(e||"")[t]||"";let i={};try{i=JSON.parse(s),(typeof i===null||typeof i!="object"||Array.isArray(i))&&(i={})}catch{}this.save(i.token||"",i.record||i.model||null)}exportToCookie(e,t=le){var c,l;const s={secure:!0,sameSite:!0,httpOnly:!0,path:"/"},i=U(this.token);s.expires=i!=null&&i.exp?new Date(1e3*i.exp):new Date("1970-01-01"),e=Object.assign({},s,e);const r={token:this.token,record:this.record?JSON.parse(JSON.stringify(this.record)):null};let o=ce(t,JSON.stringify(r),e);const a=typeof Blob<"u"?new Blob([o]).size:o.length;if(r.record&&a>4096){r.record={id:(c=r.record)==null?void 0:c.id,email:(l=r.record)==null?void 0:l.email};const p=["collectionId","collectionName","verified"];for(const h in this.record)p.includes(h)&&(r.record[h]=this.record[h]);o=ce(t,JSON.stringify(r),e)}return o}onChange(e,t=!1){return this._onChangeCallbacks.push(e),t&&e(this.token,this.record),()=>{for(let s=this._onChangeCallbacks.length-1;s>=0;s--)if(this._onChangeCallbacks[s]==e)return delete this._onChangeCallbacks[s],void this._onChangeCallbacks.splice(s,1)}}triggerChange(){for(const e of this._onChangeCallbacks)e&&e(this.token,this.record)}}class rt extends z{constructor(e="pocketbase_auth"){super(),this.storageFallback={},this.storageKey=e,this._bindStorageEvent()}get token(){return(this._storageGet(this.storageKey)||{}).token||""}get record(){const e=this._storageGet(this.storageKey)||{};return e.record||e.model||null}get model(){return this.record}save(e,t){this._storageSet(this.storageKey,{token:e,record:t}),super.save(e,t)}clear(){this._storageRemove(this.storageKey),super.clear()}_storageGet(e){if(typeof window<"u"&&(window!=null&&window.localStorage)){const t=window.localStorage.getItem(e)||"";try{return JSON.parse(t)}catch{return t}}return this.storageFallback[e]}_storageSet(e,t){if(typeof window<"u"&&(window!=null&&window.localStorage)){let s=t;typeof t!="string"&&(s=JSON.stringify(t)),window.localStorage.setItem(e,s)}else this.storageFallback[e]=t}_storageRemove(e){var t;typeof window<"u"&&(window!=null&&window.localStorage)&&((t=window.localStorage)==null||t.removeItem(e)),delete this.storageFallback[e]}_bindStorageEvent(){typeof window<"u"&&(window!=null&&window.localStorage)&&window.addEventListener&&window.addEventListener("storage",e=>{if(e.key!=this.storageKey)return;const t=this._storageGet(this.storageKey)||{};super.save(t.token||"",t.record||t.model||null)})}}class k{constructor(e){this.client=e}}class ot extends k{async getAll(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/settings",e)}async update(e,t){return t=Object.assign({method:"PATCH",body:e},t),this.client.send("/api/settings",t)}async testS3(e="storage",t){return t=Object.assign({method:"POST",body:{filesystem:e}},t),this.client.send("/api/settings/test/s3",t).then(()=>!0)}async testEmail(e,t,s,i){return i=Object.assign({method:"POST",body:{email:t,template:s,collection:e}},i),this.client.send("/api/settings/test/email",i).then(()=>!0)}async generateAppleClientSecret(e,t,s,i,r,o){return o=Object.assign({method:"POST",body:{clientId:e,teamId:t,keyId:s,privateKey:i,duration:r}},o),this.client.send("/api/settings/apple/generate-client-secret",o)}}const at=["requestKey","$cancelKey","$autoCancel","fetch","headers","body","query","params","cache","credentials","headers","integrity","keepalive","method","mode","redirect","referrer","referrerPolicy","signal","window"];function Q(n){if(n){n.query=n.query||{};for(let e in n)at.includes(e)||(n.query[e]=n[e],delete n[e])}}function ye(n){const e=[];for(const t in n){const s=encodeURIComponent(t),i=Array.isArray(n[t])?n[t]:[n[t]];for(let r of i)r=ct(r),r!==null&&e.push(s+"="+r)}return e.join("&")}function ct(n){return n==null?null:n instanceof Date?encodeURIComponent(n.toISOString().replace("T"," ")):encodeURIComponent(typeof n=="object"?JSON.stringify(n):n)}class we extends k{constructor(){super(...arguments),this.clientId="",this.eventSource=null,this.subscriptions={},this.lastSentSubscriptions=[],this.maxConnectTimeout=15e3,this.reconnectAttempts=0,this.maxReconnectAttempts=1/0,this.predefinedReconnectIntervals=[200,300,500,1e3,1200,1500,2e3],this.pendingConnects=[]}get isConnected(){return!!this.eventSource&&!!this.clientId&&!this.pendingConnects.length}async subscribe(e,t,s){var o;if(!e)throw new Error("topic must be set.");let i=e;if(s){Q(s=Object.assign({},s));const a="options="+encodeURIComponent(JSON.stringify({query:s.query,headers:s.headers}));i+=(i.includes("?")?"&":"?")+a}const r=function(a){const c=a;let l;try{l=JSON.parse(c==null?void 0:c.data)}catch{}t(l||{})};return this.subscriptions[i]||(this.subscriptions[i]=[]),this.subscriptions[i].push(r),this.isConnected?this.subscriptions[i].length===1?await this.submitSubscriptions():(o=this.eventSource)==null||o.addEventListener(i,r):await this.connect(),async()=>this.unsubscribeByTopicAndListener(e,r)}async unsubscribe(e){var s;let t=!1;if(e){const i=this.getSubscriptionsByTopic(e);for(let r in i)if(this.hasSubscriptionListeners(r)){for(let o of this.subscriptions[r])(s=this.eventSource)==null||s.removeEventListener(r,o);delete this.subscriptions[r],t||(t=!0)}}else this.subscriptions={};this.hasSubscriptionListeners()?t&&await this.submitSubscriptions():this.disconnect()}async unsubscribeByPrefix(e){var s;let t=!1;for(let i in this.subscriptions)if((i+"?").startsWith(e)){t=!0;for(let r of this.subscriptions[i])(s=this.eventSource)==null||s.removeEventListener(i,r);delete this.subscriptions[i]}t&&(this.hasSubscriptionListeners()?await this.submitSubscriptions():this.disconnect())}async unsubscribeByTopicAndListener(e,t){var r;let s=!1;const i=this.getSubscriptionsByTopic(e);for(let o in i){if(!Array.isArray(this.subscriptions[o])||!this.subscriptions[o].length)continue;let a=!1;for(let c=this.subscriptions[o].length-1;c>=0;c--)this.subscriptions[o][c]===t&&(a=!0,delete this.subscriptions[o][c],this.subscriptions[o].splice(c,1),(r=this.eventSource)==null||r.removeEventListener(o,t));a&&(this.subscriptions[o].length||delete this.subscriptions[o],s||this.hasSubscriptionListeners(o)||(s=!0))}this.hasSubscriptionListeners()?s&&await this.submitSubscriptions():this.disconnect()}hasSubscriptionListeners(e){var t,s;if(this.subscriptions=this.subscriptions||{},e)return!!((t=this.subscriptions[e])!=null&&t.length);for(let i in this.subscriptions)if((s=this.subscriptions[i])!=null&&s.length)return!0;return!1}async submitSubscriptions(){if(this.clientId)return this.addAllSubscriptionListeners(),this.lastSentSubscriptions=this.getNonEmptySubscriptionKeys(),this.client.send("/api/realtime",{method:"POST",body:{clientId:this.clientId,subscriptions:this.lastSentSubscriptions},requestKey:this.getSubscriptionsCancelKey()}).catch(e=>{if(!(e!=null&&e.isAbort))throw e})}getSubscriptionsCancelKey(){return"realtime_"+this.clientId}getSubscriptionsByTopic(e){const t={};e=e.includes("?")?e:e+"?";for(let s in this.subscriptions)(s+"?").startsWith(e)&&(t[s]=this.subscriptions[s]);return t}getNonEmptySubscriptionKeys(){const e=[];for(let t in this.subscriptions)this.subscriptions[t].length&&e.push(t);return e}addAllSubscriptionListeners(){if(this.eventSource){this.removeAllSubscriptionListeners();for(let e in this.subscriptions)for(let t of this.subscriptions[e])this.eventSource.addEventListener(e,t)}}removeAllSubscriptionListeners(){if(this.eventSource)for(let e in this.subscriptions)for(let t of this.subscriptions[e])this.eventSource.removeEventListener(e,t)}async connect(){if(!(this.reconnectAttempts>0))return new Promise((e,t)=>{this.pendingConnects.push({resolve:e,reject:t}),this.pendingConnects.length>1||this.initConnect()})}initConnect(){this.disconnect(!0),clearTimeout(this.connectTimeoutId),this.connectTimeoutId=setTimeout(()=>{this.connectErrorHandler(new Error("EventSource connect took too long."))},this.maxConnectTimeout),this.eventSource=new EventSource(this.client.buildURL("/api/realtime")),this.eventSource.onerror=e=>{this.connectErrorHandler(new Error("Failed to establish realtime connection."))},this.eventSource.addEventListener("PB_CONNECT",e=>{const t=e;this.clientId=t==null?void 0:t.lastEventId,this.submitSubscriptions().then(async()=>{let s=3;for(;this.hasUnsentSubscriptions()&&s>0;)s--,await this.submitSubscriptions()}).then(()=>{for(let i of this.pendingConnects)i.resolve();this.pendingConnects=[],this.reconnectAttempts=0,clearTimeout(this.reconnectTimeoutId),clearTimeout(this.connectTimeoutId);const s=this.getSubscriptionsByTopic("PB_CONNECT");for(let i in s)for(let r of s[i])r(e)}).catch(s=>{this.clientId="",this.connectErrorHandler(s)})})}hasUnsentSubscriptions(){const e=this.getNonEmptySubscriptionKeys();if(e.length!=this.lastSentSubscriptions.length)return!0;for(const t of e)if(!this.lastSentSubscriptions.includes(t))return!0;return!1}connectErrorHandler(e){if(clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),!this.clientId&&!this.reconnectAttempts||this.reconnectAttempts>this.maxReconnectAttempts){for(let s of this.pendingConnects)s.reject(new y(e));return this.pendingConnects=[],void this.disconnect()}this.disconnect(!0);const t=this.predefinedReconnectIntervals[this.reconnectAttempts]||this.predefinedReconnectIntervals[this.predefinedReconnectIntervals.length-1];this.reconnectAttempts++,this.reconnectTimeoutId=setTimeout(()=>{this.initConnect()},t)}disconnect(e=!1){var t;if(this.clientId&&this.onDisconnect&&this.onDisconnect(Object.keys(this.subscriptions)),clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),this.removeAllSubscriptionListeners(),this.client.cancelRequest(this.getSubscriptionsCancelKey()),(t=this.eventSource)==null||t.close(),this.eventSource=null,this.clientId="",!e){this.reconnectAttempts=0;for(let s of this.pendingConnects)s.resolve();this.pendingConnects=[]}}}class Se extends k{decode(e){return e}async getFullList(e,t){if(typeof e=="number")return this._getFullList(e,t);let s=500;return(t=Object.assign({},e,t)).batch&&(s=t.batch,delete t.batch),this._getFullList(s,t)}async getList(e=1,t=30,s){return(s=Object.assign({method:"GET"},s)).query=Object.assign({page:e,perPage:t},s.query),this.client.send(this.baseCrudPath,s).then(i=>{var r;return i.items=((r=i.items)==null?void 0:r.map(o=>this.decode(o)))||[],i})}async getFirstListItem(e,t){return(t=Object.assign({requestKey:"one_by_filter_"+this.baseCrudPath+"_"+e},t)).query=Object.assign({filter:e,skipTotal:1},t.query),this.getList(1,1,t).then(s=>{var i;if(!((i=s==null?void 0:s.items)!=null&&i.length))throw new y({status:404,response:{code:404,message:"The requested resource wasn't found.",data:{}}});return s.items[0]})}async getOne(e,t){if(!e)throw new y({url:this.client.buildURL(this.baseCrudPath+"/"),status:404,response:{code:404,message:"Missing required record id.",data:{}}});return t=Object.assign({method:"GET"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),t).then(s=>this.decode(s))}async create(e,t){return t=Object.assign({method:"POST",body:e},t),this.client.send(this.baseCrudPath,t).then(s=>this.decode(s))}async update(e,t,s){return s=Object.assign({method:"PATCH",body:t},s),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),s).then(i=>this.decode(i))}async delete(e,t){return t=Object.assign({method:"DELETE"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),t).then(()=>!0)}_getFullList(e=500,t){(t=t||{}).query=Object.assign({skipTotal:1},t.query);let s=[],i=async r=>this.getList(r,e||500,t).then(o=>{const a=o.items;return s=s.concat(a),a.length==o.perPage?i(r+1):s});return i(1)}}function I(n,e,t,s){const i=s!==void 0;return i||t!==void 0?i?(console.warn(n),e.body=Object.assign({},e.body,t),e.query=Object.assign({},e.query,s),e):Object.assign(e,t):e}function H(n){var e;(e=n._resetAutoRefresh)==null||e.call(n)}class lt extends Se{constructor(e,t){super(e),this.collectionIdOrName=t}get baseCrudPath(){return this.baseCollectionPath+"/records"}get baseCollectionPath(){return"/api/collections/"+encodeURIComponent(this.collectionIdOrName)}get isSuperusers(){return this.collectionIdOrName=="_superusers"||this.collectionIdOrName=="_pbc_2773867675"}async subscribe(e,t,s){if(!e)throw new Error("Missing topic.");if(!t)throw new Error("Missing subscription callback.");return this.client.realtime.subscribe(this.collectionIdOrName+"/"+e,t,s)}async unsubscribe(e){return e?this.client.realtime.unsubscribe(this.collectionIdOrName+"/"+e):this.client.realtime.unsubscribeByPrefix(this.collectionIdOrName)}async getFullList(e,t){if(typeof e=="number")return super.getFullList(e,t);const s=Object.assign({},e,t);return super.getFullList(s)}async getList(e=1,t=30,s){return super.getList(e,t,s)}async getFirstListItem(e,t){return super.getFirstListItem(e,t)}async getOne(e,t){return super.getOne(e,t)}async create(e,t){return super.create(e,t)}async update(e,t,s){return super.update(e,t,s).then(i=>{var r,o,a;if(((r=this.client.authStore.record)==null?void 0:r.id)===(i==null?void 0:i.id)&&(((o=this.client.authStore.record)==null?void 0:o.collectionId)===this.collectionIdOrName||((a=this.client.authStore.record)==null?void 0:a.collectionName)===this.collectionIdOrName)){let c=Object.assign({},this.client.authStore.record.expand),l=Object.assign({},this.client.authStore.record,i);c&&(l.expand=Object.assign(c,i.expand)),this.client.authStore.save(this.client.authStore.token,l)}return i})}async delete(e,t){return super.delete(e,t).then(s=>{var i,r,o;return!s||((i=this.client.authStore.record)==null?void 0:i.id)!==e||((r=this.client.authStore.record)==null?void 0:r.collectionId)!==this.collectionIdOrName&&((o=this.client.authStore.record)==null?void 0:o.collectionName)!==this.collectionIdOrName||this.client.authStore.clear(),s})}authResponse(e){const t=this.decode((e==null?void 0:e.record)||{});return this.client.authStore.save(e==null?void 0:e.token,t),Object.assign({},e,{token:(e==null?void 0:e.token)||"",record:t})}async listAuthMethods(e){return e=Object.assign({method:"GET",fields:"mfa,otp,password,oauth2"},e),this.client.send(this.baseCollectionPath+"/auth-methods",e)}async authWithPassword(e,t,s){let i;s=Object.assign({method:"POST",body:{identity:e,password:t}},s),this.isSuperusers&&(i=s.autoRefreshThreshold,delete s.autoRefreshThreshold,s.autoRefresh||H(this.client));let r=await this.client.send(this.baseCollectionPath+"/auth-with-password",s);return r=this.authResponse(r),i&&this.isSuperusers&&function(a,c,l,p){H(a);const h=a.beforeSend,b=a.authStore.record,R=a.authStore.onChange((w,d)=>{(!w||(d==null?void 0:d.id)!=(b==null?void 0:b.id)||(d!=null&&d.collectionId||b!=null&&b.collectionId)&&(d==null?void 0:d.collectionId)!=(b==null?void 0:b.collectionId))&&H(a)});a._resetAutoRefresh=function(){R(),a.beforeSend=h,delete a._resetAutoRefresh},a.beforeSend=async(w,d)=>{var g;const S=a.authStore.token;if((g=d.query)!=null&&g.autoRefresh)return h?h(w,d):{url:w,sendOptions:d};let P=a.authStore.isValid;if(P&&me(a.authStore.token,c))try{await l()}catch{P=!1}P||await p();const C=d.headers||{};for(let q in C)if(q.toLowerCase()=="authorization"&&S==C[q]&&a.authStore.token){C[q]=a.authStore.token;break}return d.headers=C,h?h(w,d):{url:w,sendOptions:d}}}(this.client,i,()=>this.authRefresh({autoRefresh:!0}),()=>this.authWithPassword(e,t,Object.assign({autoRefresh:!0},s))),r}async authWithOAuth2Code(e,t,s,i,r,o,a){let c={method:"POST",body:{provider:e,code:t,codeVerifier:s,redirectURL:i,createData:r}};return c=I("This form of authWithOAuth2Code(provider, code, codeVerifier, redirectURL, createData?, body?, query?) is deprecated. Consider replacing it with authWithOAuth2Code(provider, code, codeVerifier, redirectURL, createData?, options?).",c,o,a),this.client.send(this.baseCollectionPath+"/auth-with-oauth2",c).then(l=>this.authResponse(l))}authWithOAuth2(...e){if(e.length>1||typeof(e==null?void 0:e[0])=="string")return console.warn("PocketBase: This form of authWithOAuth2() is deprecated and may get removed in the future. Please replace with authWithOAuth2Code() OR use the authWithOAuth2() realtime form as shown in https://pocketbase.io/docs/authentication/#oauth2-integration."),this.authWithOAuth2Code((e==null?void 0:e[0])||"",(e==null?void 0:e[1])||"",(e==null?void 0:e[2])||"",(e==null?void 0:e[3])||"",(e==null?void 0:e[4])||{},(e==null?void 0:e[5])||{},(e==null?void 0:e[6])||{});const t=(e==null?void 0:e[0])||{};let s=null;t.urlCallback||(s=he(void 0));const i=new we(this.client);function r(){s==null||s.close(),i.unsubscribe()}const o={},a=t.requestKey;return a&&(o.requestKey=a),this.listAuthMethods(o).then(c=>{var b;const l=c.oauth2.providers.find(R=>R.name===t.provider);if(!l)throw new y(new Error(`Missing or invalid provider "${t.provider}".`));const p=this.client.buildURL("/api/oauth2-redirect"),h=a?(b=this.client.cancelControllers)==null?void 0:b[a]:void 0;return h&&(h.signal.onabort=()=>{r()}),new Promise(async(R,w)=>{var d;try{await i.subscribe("@oauth2",async g=>{var Y;const q=i.clientId;try{if(!g.state||q!==g.state)throw new Error("State parameters don't match.");if(g.error||!g.code)throw new Error("OAuth2 redirect error or missing code: "+g.error);const _=Object.assign({},t);delete _.provider,delete _.scopes,delete _.createData,delete _.urlCallback,(Y=h==null?void 0:h.signal)!=null&&Y.onabort&&(h.signal.onabort=null);const ve=await this.authWithOAuth2Code(l.name,g.code,l.codeVerifier,p,t.createData,_);R(ve)}catch(_){w(new y(_))}r()});const S={state:i.clientId};(d=t.scopes)!=null&&d.length&&(S.scope=t.scopes.join(" "));const P=this._replaceQueryParams(l.authURL+p,S);await(t.urlCallback||function(g){s?s.location.href=g:s=he(g)})(P)}catch(S){r(),w(new y(S))}})}).catch(c=>{throw r(),c})}async authRefresh(e,t){let s={method:"POST"};return s=I("This form of authRefresh(body?, query?) is deprecated. Consider replacing it with authRefresh(options?).",s,e,t),this.client.send(this.baseCollectionPath+"/auth-refresh",s).then(i=>this.authResponse(i))}async requestPasswordReset(e,t,s){let i={method:"POST",body:{email:e}};return i=I("This form of requestPasswordReset(email, body?, query?) is deprecated. Consider replacing it with requestPasswordReset(email, options?).",i,t,s),this.client.send(this.baseCollectionPath+"/request-password-reset",i).then(()=>!0)}async confirmPasswordReset(e,t,s,i,r){let o={method:"POST",body:{token:e,password:t,passwordConfirm:s}};return o=I("This form of confirmPasswordReset(token, password, passwordConfirm, body?, query?) is deprecated. Consider replacing it with confirmPasswordReset(token, password, passwordConfirm, options?).",o,i,r),this.client.send(this.baseCollectionPath+"/confirm-password-reset",o).then(()=>!0)}async requestVerification(e,t,s){let i={method:"POST",body:{email:e}};return i=I("This form of requestVerification(email, body?, query?) is deprecated. Consider replacing it with requestVerification(email, options?).",i,t,s),this.client.send(this.baseCollectionPath+"/request-verification",i).then(()=>!0)}async confirmVerification(e,t,s){let i={method:"POST",body:{token:e}};return i=I("This form of confirmVerification(token, body?, query?) is deprecated. Consider replacing it with confirmVerification(token, options?).",i,t,s),this.client.send(this.baseCollectionPath+"/confirm-verification",i).then(()=>{const r=U(e),o=this.client.authStore.record;return o&&!o.verified&&o.id===r.id&&o.collectionId===r.collectionId&&(o.verified=!0,this.client.authStore.save(this.client.authStore.token,o)),!0})}async requestEmailChange(e,t,s){let i={method:"POST",body:{newEmail:e}};return i=I("This form of requestEmailChange(newEmail, body?, query?) is deprecated. Consider replacing it with requestEmailChange(newEmail, options?).",i,t,s),this.client.send(this.baseCollectionPath+"/request-email-change",i).then(()=>!0)}async confirmEmailChange(e,t,s,i){let r={method:"POST",body:{token:e,password:t}};return r=I("This form of confirmEmailChange(token, password, body?, query?) is deprecated. Consider replacing it with confirmEmailChange(token, password, options?).",r,s,i),this.client.send(this.baseCollectionPath+"/confirm-email-change",r).then(()=>{const o=U(e),a=this.client.authStore.record;return a&&a.id===o.id&&a.collectionId===o.collectionId&&this.client.authStore.clear(),!0})}async listExternalAuths(e,t){return this.client.collection("_externalAuths").getFullList(Object.assign({},t,{filter:this.client.filter("recordRef = {:id}",{id:e})}))}async unlinkExternalAuth(e,t,s){const i=await this.client.collection("_externalAuths").getFirstListItem(this.client.filter("recordRef = {:recordId} && provider = {:provider}",{recordId:e,provider:t}));return this.client.collection("_externalAuths").delete(i.id,s).then(()=>!0)}async requestOTP(e,t){return t=Object.assign({method:"POST",body:{email:e}},t),this.client.send(this.baseCollectionPath+"/request-otp",t)}async authWithOTP(e,t,s){return s=Object.assign({method:"POST",body:{otpId:e,password:t}},s),this.client.send(this.baseCollectionPath+"/auth-with-otp",s).then(i=>this.authResponse(i))}async impersonate(e,t,s){(s=Object.assign({method:"POST",body:{duration:t}},s)).headers=s.headers||{},s.headers.Authorization||(s.headers.Authorization=this.client.authStore.token);const i=new Ce(this.client.baseURL,new z,this.client.lang),r=await i.send(this.baseCollectionPath+"/impersonate/"+encodeURIComponent(e),s);return i.authStore.save(r==null?void 0:r.token,this.decode((r==null?void 0:r.record)||{})),i}_replaceQueryParams(e,t={}){let s=e,i="";e.indexOf("?")>=0&&(s=e.substring(0,e.indexOf("?")),i=e.substring(e.indexOf("?")+1));const r={},o=i.split("&");for(const a of o){if(a=="")continue;const c=a.split("=");r[decodeURIComponent(c[0].replace(/\+/g," "))]=decodeURIComponent((c[1]||"").replace(/\+/g," "))}for(let a in t)t.hasOwnProperty(a)&&(t[a]==null?delete r[a]:r[a]=t[a]);i="";for(let a in r)r.hasOwnProperty(a)&&(i!=""&&(i+="&"),i+=encodeURIComponent(a.replace(/%20/g,"+"))+"="+encodeURIComponent(r[a].replace(/%20/g,"+")));return i!=""?s+"?"+i:s}}function he(n){if(typeof window>"u"||!(window!=null&&window.open))throw new y(new Error("Not in a browser context - please pass a custom urlCallback function."));let e=1024,t=768,s=window.innerWidth,i=window.innerHeight;e=e>s?s:e,t=t>i?i:t;let r=s/2-e/2,o=i/2-t/2;return window.open(n,"popup_window","width="+e+",height="+t+",top="+o+",left="+r+",resizable,menubar=no")}class ht extends Se{get baseCrudPath(){return"/api/collections"}async import(e,t=!1,s){return s=Object.assign({method:"PUT",body:{collections:e,deleteMissing:t}},s),this.client.send(this.baseCrudPath+"/import",s).then(()=>!0)}async getScaffolds(e){return e=Object.assign({method:"GET"},e),this.client.send(this.baseCrudPath+"/meta/scaffolds",e)}async truncate(e,t){return t=Object.assign({method:"DELETE"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e)+"/truncate",t).then(()=>!0)}}class ut extends k{async getList(e=1,t=30,s){return(s=Object.assign({method:"GET"},s)).query=Object.assign({page:e,perPage:t},s.query),this.client.send("/api/logs",s)}async getOne(e,t){if(!e)throw new y({url:this.client.buildURL("/api/logs/"),status:404,response:{code:404,message:"Missing required log id.",data:{}}});return t=Object.assign({method:"GET"},t),this.client.send("/api/logs/"+encodeURIComponent(e),t)}async getStats(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/logs/stats",e)}}class dt extends k{async check(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/health",e)}}class pt extends k{getUrl(e,t,s={}){return console.warn("Please replace pb.files.getUrl() with pb.files.getURL()"),this.getURL(e,t,s)}getURL(e,t,s={}){if(!t||!(e!=null&&e.id)||!(e!=null&&e.collectionId)&&!(e!=null&&e.collectionName))return"";const i=[];i.push("api"),i.push("files"),i.push(encodeURIComponent(e.collectionId||e.collectionName)),i.push(encodeURIComponent(e.id)),i.push(encodeURIComponent(t));let r=this.client.buildURL(i.join("/"));if(Object.keys(s).length){s.download===!1&&delete s.download;const o=new URLSearchParams(s);r+=(r.includes("?")?"&":"?")+o}return r}async getToken(e){return e=Object.assign({method:"POST"},e),this.client.send("/api/files/token",e).then(t=>(t==null?void 0:t.token)||"")}}class ft extends k{async getFullList(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/backups",e)}async create(e,t){return t=Object.assign({method:"POST",body:{name:e}},t),this.client.send("/api/backups",t).then(()=>!0)}async upload(e,t){return t=Object.assign({method:"POST",body:e},t),this.client.send("/api/backups/upload",t).then(()=>!0)}async delete(e,t){return t=Object.assign({method:"DELETE"},t),this.client.send(`/api/backups/${encodeURIComponent(e)}`,t).then(()=>!0)}async restore(e,t){return t=Object.assign({method:"POST"},t),this.client.send(`/api/backups/${encodeURIComponent(e)}/restore`,t).then(()=>!0)}getDownloadUrl(e,t){return console.warn("Please replace pb.backups.getDownloadUrl() with pb.backups.getDownloadURL()"),this.getDownloadURL(e,t)}getDownloadURL(e,t){return this.client.buildURL(`/api/backups/${encodeURIComponent(t)}?token=${encodeURIComponent(e)}`)}}class bt extends k{async getFullList(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/crons",e)}async run(e,t){return t=Object.assign({method:"POST"},t),this.client.send(`/api/crons/${encodeURIComponent(e)}`,t).then(()=>!0)}}function $(n){return typeof Blob<"u"&&n instanceof Blob||typeof File<"u"&&n instanceof File||n!==null&&typeof n=="object"&&n.uri&&(typeof navigator<"u"&&navigator.product==="ReactNative"||typeof global<"u"&&global.HermesInternal)}function G(n){return n&&(n.constructor.name==="FormData"||typeof FormData<"u"&&n instanceof FormData)}function ue(n){for(const e in n){const t=Array.isArray(n[e])?n[e]:[n[e]];for(const s of t)if($(s))return!0}return!1}const gt=/^[\-\.\d]+$/;function de(n){if(typeof n!="string")return n;if(n=="true")return!0;if(n=="false")return!1;if((n[0]==="-"||n[0]>="0"&&n[0]<="9")&&gt.test(n)){let e=+n;if(""+e===n)return e}return n}class mt extends k{constructor(){super(...arguments),this.requests=[],this.subs={}}collection(e){return this.subs[e]||(this.subs[e]=new yt(this.requests,e)),this.subs[e]}async send(e){const t=new FormData,s=[];for(let i=0;i<this.requests.length;i++){const r=this.requests[i];if(s.push({method:r.method,url:r.url,headers:r.headers,body:r.json}),r.files)for(let o in r.files){const a=r.files[o]||[];for(let c of a)t.append("requests."+i+"."+o,c)}}return t.append("@jsonPayload",JSON.stringify({requests:s})),e=Object.assign({method:"POST",body:t},e),this.client.send("/api/batch",e)}}class yt{constructor(e,t){this.requests=[],this.requests=e,this.collectionIdOrName=t}upsert(e,t){t=Object.assign({body:e||{}},t);const s={method:"PUT",url:"/api/collections/"+encodeURIComponent(this.collectionIdOrName)+"/records"};this.prepareRequest(s,t),this.requests.push(s)}create(e,t){t=Object.assign({body:e||{}},t);const s={method:"POST",url:"/api/collections/"+encodeURIComponent(this.collectionIdOrName)+"/records"};this.prepareRequest(s,t),this.requests.push(s)}update(e,t,s){s=Object.assign({body:t||{}},s);const i={method:"PATCH",url:"/api/collections/"+encodeURIComponent(this.collectionIdOrName)+"/records/"+encodeURIComponent(e)};this.prepareRequest(i,s),this.requests.push(i)}delete(e,t){t=Object.assign({},t);const s={method:"DELETE",url:"/api/collections/"+encodeURIComponent(this.collectionIdOrName)+"/records/"+encodeURIComponent(e)};this.prepareRequest(s,t),this.requests.push(s)}prepareRequest(e,t){if(Q(t),e.headers=t.headers,e.json={},e.files={},t.query!==void 0){const i=ye(t.query);i&&(e.url+=(e.url.includes("?")?"&":"?")+i)}let s=t.body;G(s)&&(s=function(r){let o={};return r.forEach((a,c)=>{if(c==="@jsonPayload"&&typeof a=="string")try{let l=JSON.parse(a);Object.assign(o,l)}catch(l){console.warn("@jsonPayload error:",l)}else o[c]!==void 0?(Array.isArray(o[c])||(o[c]=[o[c]]),o[c].push(de(a))):o[c]=de(a)}),o}(s));for(const i in s){const r=s[i];if($(r))e.files[i]=e.files[i]||[],e.files[i].push(r);else if(Array.isArray(r)){const o=[],a=[];for(const c of r)$(c)?o.push(c):a.push(c);if(o.length>0&&o.length==r.length){e.files[i]=e.files[i]||[];for(let c of o)e.files[i].push(c)}else if(e.json[i]=a,o.length>0){let c=i;i.startsWith("+")||i.endsWith("+")||(c+="+"),e.files[c]=e.files[c]||[];for(let l of o)e.files[c].push(l)}}else e.json[i]=r}}}class Ce{get baseUrl(){return this.baseURL}set baseUrl(e){this.baseURL=e}constructor(e="/",t,s="en-US"){this.cancelControllers={},this.recordServices={},this.enableAutoCancellation=!0,this.baseURL=e,this.lang=s,t?this.authStore=t:typeof window<"u"&&window.Deno?this.authStore=new z:this.authStore=new rt,this.collections=new ht(this),this.files=new pt(this),this.logs=new ut(this),this.settings=new ot(this),this.realtime=new we(this),this.health=new dt(this),this.backups=new ft(this),this.crons=new bt(this)}get admins(){return this.collection("_superusers")}createBatch(){return new mt(this)}collection(e){return this.recordServices[e]||(this.recordServices[e]=new lt(this,e)),this.recordServices[e]}autoCancellation(e){return this.enableAutoCancellation=!!e,this}cancelRequest(e){return this.cancelControllers[e]&&(this.cancelControllers[e].abort(),delete this.cancelControllers[e]),this}cancelAllRequests(){for(let e in this.cancelControllers)this.cancelControllers[e].abort();return this.cancelControllers={},this}filter(e,t){if(!t)return e;for(let s in t){let i=t[s];switch(typeof i){case"boolean":case"number":i=""+i;break;case"string":i="'"+i.replace(/'/g,"\\'")+"'";break;default:i=i===null?"null":i instanceof Date?"'"+i.toISOString().replace("T"," ")+"'":"'"+JSON.stringify(i).replace(/'/g,"\\'")+"'"}e=e.replaceAll("{:"+s+"}",i)}return e}getFileUrl(e,t,s={}){return console.warn("Please replace pb.getFileUrl() with pb.files.getURL()"),this.files.getURL(e,t,s)}buildUrl(e){return console.warn("Please replace pb.buildUrl() with pb.buildURL()"),this.buildURL(e)}buildURL(e){var s;let t=this.baseURL;return typeof window>"u"||!window.location||t.startsWith("https://")||t.startsWith("http://")||(t=(s=window.location.origin)!=null&&s.endsWith("/")?window.location.origin.substring(0,window.location.origin.length-1):window.location.origin||"",this.baseURL.startsWith("/")||(t+=window.location.pathname||"/",t+=t.endsWith("/")?"":"/"),t+=this.baseURL),e&&(t+=t.endsWith("/")?"":"/",t+=e.startsWith("/")?e.substring(1):e),t}async send(e,t){t=this.initSendOptions(e,t);let s=this.buildURL(e);if(this.beforeSend){const i=Object.assign({},await this.beforeSend(s,t));i.url!==void 0||i.options!==void 0?(s=i.url||s,t=i.options||t):Object.keys(i).length&&(t=i,console!=null&&console.warn&&console.warn("Deprecated format of beforeSend return: please use `return { url, options }`, instead of `return options`."))}if(t.query!==void 0){const i=ye(t.query);i&&(s+=(s.includes("?")?"&":"?")+i),delete t.query}return this.getHeader(t.headers,"Content-Type")=="application/json"&&t.body&&typeof t.body!="string"&&(t.body=JSON.stringify(t.body)),(t.fetch||fetch)(s,t).then(async i=>{let r={};try{r=await i.json()}catch{}if(this.afterSend&&(r=await this.afterSend(i,r,t)),i.status>=400)throw new y({url:i.url,status:i.status,data:r});return r}).catch(i=>{throw new y(i)})}initSendOptions(e,t){if((t=Object.assign({method:"GET"},t)).body=function(i){if(typeof FormData>"u"||i===void 0||typeof i!="object"||i===null||G(i)||!ue(i))return i;const r=new FormData;for(const o in i){const a=i[o];if(a!==void 0)if(typeof a!="object"||ue({data:a})){const c=Array.isArray(a)?a:[a];for(let l of c)r.append(o,l)}else{let c={};c[o]=a,r.append("@jsonPayload",JSON.stringify(c))}}return r}(t.body),Q(t),t.query=Object.assign({},t.params,t.query),t.requestKey===void 0&&(t.$autoCancel===!1||t.query.$autoCancel===!1?t.requestKey=null:(t.$cancelKey||t.query.$cancelKey)&&(t.requestKey=t.$cancelKey||t.query.$cancelKey)),delete t.$autoCancel,delete t.query.$autoCancel,delete t.$cancelKey,delete t.query.$cancelKey,this.getHeader(t.headers,"Content-Type")!==null||G(t.body)||(t.headers=Object.assign({},t.headers,{"Content-Type":"application/json"})),this.getHeader(t.headers,"Accept-Language")===null&&(t.headers=Object.assign({},t.headers,{"Accept-Language":this.lang})),this.authStore.token&&this.getHeader(t.headers,"Authorization")===null&&(t.headers=Object.assign({},t.headers,{Authorization:this.authStore.token})),this.enableAutoCancellation&&t.requestKey!==null){const s=t.requestKey||(t.method||"GET")+e;delete t.requestKey,this.cancelRequest(s);const i=new AbortController;this.cancelControllers[s]=i,t.signal=i.signal}return t}getHeader(e,t){e=e||{},t=t.toLowerCase();for(let s in e)if(s.toLowerCase()==t)return e[s];return null}}var v,j,N,E,m,x;class wt{constructor(e,t){L(this,v);L(this,j);L(this,N);L(this,E,ne(re({})));L(this,m,ne(re({})));L(this,x,Me(()=>Object.fromEntries(Object.keys({...f(u(this,E)),...f(u(this,m))}).map(e=>{const t=f(u(this,m))[e]?f(u(this,m))[e].latestRecord:f(u(this,E))[e];if(t)return[e,t]}).filter(e=>e!==void 0))));D(this,j,t),D(this,v,e),D(this,N,et(s=>{this.reload(u(this,j));const i=u(this,v).subscribe("*",({action:r,record:o})=>{switch(r){case"delete":delete f(u(this,E))[o.id],s();break;case"create":case"update":f(u(this,E))[o.id]=o,s();break}},u(this,j));return()=>{i.then(r=>r())}}))}async reload(e){const t=await u(this,v).getFullList(e??u(this,j));for(const s of t)f(u(this,E))[s.id]=s}async update(e,t){const i=(await Promise.allSettled(Object.entries(e).map(async([r,o])=>{var a;if(t??(t=u(this,j)),typeof t=="function"&&(t=t(r)),o){const c=f(u(this,x))[r],l=oe(o);if(c){const p=oe(c),h=Oe(structuredClone(p),l);if(V(p,h))return;f(u(this,m))[r]={count:(((a=f(u(this,m))[r])==null?void 0:a.count)??0)+1,latestRecord:h};try{await u(this,v).update(r,h,t)}finally{f(u(this,m))[r]&&(f(u(this,m))[r].count--,f(u(this,m))[r].count===0&&delete f(u(this,m))[r])}}else await u(this,v).create({...l,id:r},t)}else delete f(u(this,m))[r],await u(this,v).delete(r,t)}))).filter(r=>r.status==="rejected").map(r=>r.reason);if(i.length)throw new AggregateError(i,`${i.length} errors during update`)}get records(){return u(this,N).call(this),f(u(this,x))}}v=new WeakMap,j=new WeakMap,N=new WeakMap,E=new WeakMap,m=new WeakMap,x=new WeakMap;function V(n,e){if(n===e)return!0;if(n==null||e==null||typeof n!=typeof e||typeof n!="object"||Array.isArray(n)!==Array.isArray(e))return!1;if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;for(let i=0;i<n.length;i++)if(!V(n[i],e[i]))return!1;return!0}const t=Object.keys(n),s=Object.keys(e);if(t.length!==s.length)return!1;for(const i of t)if(!s.includes(i)||!V(n[i],e[i]))return!1;return!0}function Oe(n,...e){for(const t of e)for(const s in t){if(!Object.prototype.hasOwnProperty.call(t,s))continue;const i=t[s],r=n[s];i===void 0?delete n[s]:r&&typeof r=="object"&&!Array.isArray(r)&&i&&typeof i=="object"&&!Array.isArray(i)?Oe(r,i):n[s]=i}return n}var St=pe('<img class="only-on-light svelte-yanwxz" alt="example task app" src="images/example-task-app-light.png"/> <img class="only-on-dark svelte-yanwxz" alt="example task app" src="images/example-task-app-dark.png"/>',1),Ct=pe(`<header><h1>runic-pocketbase-collection</h1> <nav><ul><li><a>home</a></li> <li><a target="blank" href="https://github.com/tomatrow/runic-pocketbase-collection">github repo</a></li> <li><a target="blank" href="https://ajcaldwell.dev">aj caldwell</a></li></ul></nav></header> <main><section id="intro"><p>A pocketbase collection wrapper for Svelte</p> <ul><li>rune based reactivity</li> <li>real time sync</li> <li>optimistic updates via diff</li></ul></section> <section><h2>Installation</h2> <code>pnpm i -D runic-pocketbase-collection</code></section> <section id="usage"><h2>Usage</h2> <!></section> <section id="task-example-app"><h2>Task App Example</h2> <!> <!></section> <section id="advanced-usage"><h2>Advanced Usage</h2> <!></section> <section id="development"><h2>Development</h2> <p>You'll need to add a <a target="_blank" href="https://pocketbase.io/docs/">pocketbase executable</a> to the database directory.</p> <p>The following start script assumes you have <a target="_blank" href="https://pnpm.io">pnpm</a> / <a target="_blank" href="https://github.com/tmux/tmux/wiki">tmux</a> / <a target="_blank" href="https://fishshell.com">fish</a> installed.</p> <pre><code>pnpm i</code>
<code>pnpm run start</code>
<code># pocketbase now running at http://127.0.0.1:8090/_</code>
<code># sveltekit app now running at http://localhost:5173</code></pre></section></main>`,1);function At(n,e){Be(e,!0);let t=new Ce("http://127.0.0.1:8090");t.autoCancellation(!1),new wt(t.collection("tasks"));var s=Ct(),i=We(s),r=O(T(i),2),o=T(r),a=T(o),c=T(a);A(a),B(4),A(o),A(r),A(i);var l=O(i,2),p=O(T(l),4),h=O(T(p),2);W(h,()=>e.data.usageExampleCode),A(p);var b=O(p,2),R=O(T(b),2);{var w=C=>{var g=St();B(2),te(C,g)};Je(R,C=>{C(w,!1)})}var d=O(R,2);W(d,()=>e.data.taskAppExampleCode),A(b);var S=O(b,2),P=O(T(S),2);W(P,()=>e.data.advancedUsageExampleCode),A(S),B(2),A(l),be(()=>Qe(c,"href",`${$e??""}/`)),te(n,s),He()}export{At as component};
